<style>
  .flex-wrap {display:flex;flex-wrap:wrap;}
  #offerte-form .col {flex:0 0 50%;padding-right:20px;padding-left:20px;max-width:50%}
  #offerte-form .form-group {display:flex;flex-direction:column;padding-bottom:10px;}
  #offerte-form .form-group input, textarea, select {padding: 6px 12px;font-size: 16px;font-weight: 400;line-height: 1.5;color: #212529;background-color: #fff;background-clip: padding-box;border: 1px solid #ced4da;appearance: none;border-radius: 4px;transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;}
  #offerte-form .form-group input:focus, textarea:focus, select:focus{color:#212529;background-color:#fff;border-color:#86b7fe;outline:0;box-shadow:0 0 0 .25rem rgb(13 110 253 / 25%)}
  #offerte-form .submit-form {flex: 0 0 100%;display:flex;justify-content:flex-end;}
</style>


<div id="offerte-form" class="offerte-form flex-wrap">
    <form id="quote-form" class="quote-form col flex-wrap" method="POST" action="" enctype="multipart/form-data">
      <div class="form-group col">
        <label for="email">E-mail</label>
        <input id="email" name="email" class="email" type="email" required/>
      </div>
      <div class="form-group col">
        <label for="firstname">Voornaam</label>
        <input type="text" id="firstname" name="firstname" class="firstname" required/>
      </div>
      <div class="form-group col">
        <label for="lastname">Lastname</label>
        <input id="lastname" name="lastname" class="lastname" required/>
      </div>
      <div class="form-group col">
        <label for="phone">Phone</label>
        <input type="text" id="phone" name="phone" class="phone" required/>
      </div>
      <div class="form-group col">
        <label for="comment">Opmerking</label>
        <textarea id="comment" name="comment" class="comment" col="3"></textarea>
      </div>
      <a href="javascript:;" class="submit-form">Submit Form</a>
    </form>
   <div class="quote-products col">
     
   </div>
</div>
<script>
  function getStorage(storageName){
      let data = '';
      try {
        data = JSON.parse(localStorage.getItem(storageName));
      } catch(exception){
        data = "Exception has accured with error message " + exception;
      }

      return data;
  }
  
  document.addEventListener("DOMContentLoaded", function () {
    var products = getStorage('ismProducts');
    
    var HtmlProducts = '<div class="HTMLProducts">';
    
    for (const [key, value] of Object.entries(products)) {
      var productHtml = '';
      productHtml += '<div class="product">'+value.title+'</div>';
      HtmlProducts += productHtml;
    }

    HtmlProducts += '</div>';

    document.querySelector('.quote-products').innerHTML = HtmlProducts;

    var clickForm = document.querySelector('.submit-form');

    clickForm.addEventListener("click", function () {
      var postData = {};

      postData['products'] = getStorage('ismProducts');
      postData['customer'] = {};

      let inputs    = document.querySelectorAll("#offerte-form input");
      let selects   = document.querySelectorAll("#offerte-form select");
      let textareas = document.querySelectorAll("#offerte-form textarea");

      const formItems = [...inputs, ...selects, ...textareas];

      for (var i = 0; i < formItems.length; i++) {
        postData['customer'][formItems[i].getAttribute('name')] = formItems[i].value;
      }

      const fetchPromise = fetch('//api.instijlmedia.nl/api/shops/shopify/index.php', {
        method: 'POST',
        body: JSON.stringify(postData),
      });

      fetchPromise.then((response) => {
        console.log(response);
        return response.json();
      }).then(function(response){
        console.log(response);
      });

  });
  });
  
</script>

{% schema %}
{
  "name": "t:sections.main-collection-banner.name",
  "class": "section",
  "settings": [
    {
      "type": "paragraph",
      "content": "t:sections.main-collection-banner.settings.paragraph.content"
    },
    {
      "type": "checkbox",
      "id": "show_collection_description",
      "default": true,
      "label": "t:sections.main-collection-banner.settings.show_collection_description.label"
    },
    {
      "type": "checkbox",
      "id": "show_collection_image",
      "default": false,
      "label": "t:sections.main-collection-banner.settings.show_collection_image.label",
      "info": "t:sections.main-collection-banner.settings.show_collection_image.info"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "options": [
        {
          "value": "accent-1",
          "label": "t:sections.all.colors.accent_1.label"
        },
        {
          "value": "accent-2",
          "label": "t:sections.all.colors.accent_2.label"
        },
        {
          "value": "background-1",
          "label": "t:sections.all.colors.background_1.label"
        },
        {
          "value": "background-2",
          "label": "t:sections.all.colors.background_2.label"
        },
        {
          "value": "inverse",
          "label": "t:sections.all.colors.inverse.label"
        }
      ],
      "default": "background-1",
      "label": "t:sections.all.colors.label"
    }
  ]
}
{% endschema %}